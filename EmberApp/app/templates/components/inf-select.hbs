<a href="#"
   class="Searchable-select__label
    {{if _isShowingMenu 'Searchable-select__label--menu-open'}}
       {{if multiple 'Searchable-select__label--multiple'}}
       {{if _hasMultipleSelection 'Searchable-select__label--multiple-selected'}}"
    {{action "toggleMenu"}}>

    {{#if _hasSingleSelection}}
        {{#if optionLabelKey}} {{get _selected optionLabelKey}}  {{else}} {{_selected}}{{/if}}
    {{/if}}

    {{#if _hasMultipleSelection}}
        {{#each _selected as |selectedOption|}}
            <span class="Searchable-select__selected-pill">
                 {{#if optionLabelKey}} {{get selectedOption optionLabelKey}}  {{else}} {{selectedOption}}{{/if}}
                <span
                        class="Searchable-select__selected-pill-clear"
                    {{action "removeOption" selectedOption bubbles=false}}>
          &times;
                </span>
            </span>
        {{/each}}
    {{/if}}

    {{#unless _hasSelection}}
        {{prompt}}
    {{/unless}}
</a>

{{#if _isShowingMenu}}
    <div class="Searchable-select__menu">
        <div class="Searchable-select__search" {{action "noop" bubbles=false}}>
            {{#if _isShowingResultCount}}
                <span class="Searchable-select__result-count-label {{if _isShowingSearchClear "Searchable-select__result-count-label__with-search-clear"}}" {{action "clickResultCountLabel"}}>{{pluralize _resultCount resultCountMessage}}</span>
            {{/if}}
            {{#if _isShowingSearchClear}}
                <button class="Searchable-select__clear-search" {{action "clearSearch" bubbles=false}}>&times;</button>
            {{/if}}
            {{#if _isSearchable}}
                {{input
                        class="Searchable-select__input"
                        type="text"
                        placeholder=searchPrompt
                        key-up="updateSearch"
                        tabindex=-1
                        bubbles=false}}
            {{/if}}

        </div>

        {{#if _isShowingClear}}
            <div class="Searchable-select__clear"
                 tabindex=-1
                 data-enter-key-action="clear"
                {{action "clear" bubbles=false}}>
        <span class="Searchable-select__icon Searchable-select__icon--clear">
          &times;
        </span>
                {{clearLabel}}
            </div>
        {{/if}}

        {{#if _isShowingAddNew}}
            <div class="Searchable-select__add-new"
                 tabindex=-1
                 data-enter-key-action="addNew"
                {{action "addNew" bubbles=false}}>
                {{addLabel}} <em>{{_searchText}}</em>
            </div>
        {{/if}}

        {{#if _isShowingNoResultsMessage}}
            <div class="Searchable-select__info">
                {{noResultsMessage}}
            </div>
        {{/if}}

        {{#if _isLoading}}
            <div class="Searchable-select__info">
                {{inf-loading}}
                <span class="Searchable-select__loader-text">
                    {{loadingMessage}}
                </span>
            </div>
        {{/if}}

        <div class="Searchable-select__options-list-scroll-wrapper">
            {{#if _hasResults}}
                <ul class="Searchable-select__options-list">
                    {{#each _filteredContent as |option|}}
                        {{inf-option
                                option=option
                                selected=_selected
                                searchText=_searchText
                                optionLabelKey=optionLabelKey
                                optionDisabledKey=optionDisabledKey
                                select-item=(action "selectItem")}}
                    {{/each}}
                    {{#unless _isLoading}}
                        {{#if _hasMeta}}
                            {{#if _hasMore}}
                                <li class="Searchable-select__options-list__has-more-item">
                                    {{#if isLoadingMore}}
                                        {{inf-loading}}
                                        <span class="Searchable-select__loading-more-label text-muted">{{loadingMoreMessage}}</span>
                                    {{else}}
                                        <span class="Searchable-select__more-label text-muted" {{action "searchMore" bubbles=false}}>{{moreMessage}}</span>
                                    {{/if}}
                                </li>
                            {{/if}}
                            {{#if _hasNoMore}}
                                <li><span class="Searchable-select__no-more-label text-muted">{{noMoreMessage}}</span></li>
                            {{/if}}
                        {{/if}}
                    {{/unless}}

                </ul>
            {{/if}}
        </div>
    </div>
{{/if}}